<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root { color-scheme: light dark; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
    body {
      margin: 0; padding: 16px; min-height: 100vh;
      background: var(--tg-theme-bg-color, #ffffff);
      color: var(--tg-theme-text-color, #000000);
    }
    .card {
      border-radius: 16px; padding: 16px;
      box-shadow: 0 6px 24px rgba(0,0,0,.12);
      background: var(--tg-theme-secondary-bg-color, #f2f2f2);
    }
    .row { display: grid; grid-template-columns: 160px 1fr; gap: 8px; margin: 6px 0; }
    .key { color: var(--tg-theme-hint-color, #6b6b6b); }
    a { color: var(--tg-theme-link-color, #2481cc); }
  </style>
</head>
<body>
  <h2>User data</h2>
  <div class="card" id="card">
    <div class="row"><div class="key">ID</div><div class="val" id="uid">—</div></div>
    <div class="row"><div class="key">Username</div><div class="val" id="un">—</div></div>
    <div class="row"><div class="key">Name</div><div class="val" id="fn">—</div></div>
    <div class="row"><div class="key">Surname</div><div class="val" id="ln">—</div></div>
    <div class="row"><div class="key">Lang</div><div class="val" id="lang">—</div></div>
    <div class="row"><div class="key">Premium</div><div class="val" id="prem">—</div></div>
    <div class="row"><div class="key">Chat type</div><div class="val" id="ctype">—</div></div>
    <div class="row"><div class="key">Chat instance</div><div class="val" id="cinst">—</div></div>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    const theme = tg.themeParams || {};
    const bg = theme.bg_color || "#ffffff";
    document.getElementById("card").style.setProperty("--bg", bg);

    const u = tg.initDataUnsafe?.user;
    const init = tg.initDataUnsafe || {};

    const byId = (id, v) => { const el = document.getElementById(id); if (el) el.textContent = v ?? "—"; };

    byId("uid", u?.id);
    byId("un", u?.username ? "@" + u.username : "—");
    byId("fn", u?.first_name);
    byId("ln", u?.last_name);
    byId("lang", u?.language_code);
    byId("prem", u?.is_premium ? "Yes" : "No");
    byId("ctype", init?.chat_type || "—");
    byId("cinst", init?.chat_instance || "—");

    tg.MainButton.setText("Close");
    tg.MainButton.onClick(() => tg.close());
    tg.MainButton.show();
  </script>
</body>
</html>
